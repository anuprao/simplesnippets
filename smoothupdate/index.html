<!DOCTYPE html>
<html>
	<head>
		<title>Experimental</title>
		
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<script type="text/javascript" src="static/glmatrix/gl-matrix-min.js"></script>
		
		<script type="text/javascript" src="static/tweener/tw.js"></script>
		
		<script type="text/javascript" src="static/hammer/hammer.min.js"></script>
				
		<style>
			
			/*
			@font-face
			{
				font-family: opens-sans-light;
				src: url('static/font/open-sans-fontfacekit/web fonts/opensans_light_macroman/OpenSans-Light-webfont.woff');
			}

			@font-face
			{
				font-family: opens-sans-regular;
				src: url('static/font/open-sans-fontfacekit/web fonts/opensans_regular_macroman/OpenSans-Regular-webfont.woff');
			}

			@font-face
			{
				font-family: opens-sans-bold;
				/* src: url('static/font/open-sans-fontfacekit/web fonts/opensans_bold_macroman/OpenSans-Bold-webfont.woff'); */
				src: url('static/font/open-sans-fontfacekit/web fonts/opensans_semibold_macroman/OpenSans-Semibold-webfont.woff');
			}
			*/
			
			
			* {
				font-family: my-font-light;
				font-weight: normal;
			}
						
			.container-fluid {
				background-color : #404040;
			}
			
			html {
				-ms-text-size-adjust: 100%;
				-webkit-text-size-adjust: 100%;
				
				font-family: my-font-light;
				
				height: 100%;
				
				margin: 0px;
			}

			body {
				background: #FFFFFF;
				
				/*
				color: #fff;
				*/

				height: 100%;
				
				margin: 0px;
				
				padding: 0px;
				
				width: 100%;	
			}
			
			#appHeader {
				width: 100%;
			}
			
			#mainCanvas {
				width: 100%;
				float : left;
			}	
			
			#text {
				position: absolute;
				left: 10px;
				bottom: 10px;
				z-index: 10;
				
				border: 0px none; 
				border-radius: 4px;					
			}					
		</style>			
	</head>
	
	<body onload="webGLMain();" >
		<noscript><h3>This page requires Javascript!</h3></noscript>
		
		<!--
		<div id="appHeader" class="navbar navbar-default">
			<button type="button" style="margin-top:7px; margin-left:7px;" class="btn btn-primary" onclick="javascript:runProgram();">Run</button>
		</div>
		-->
				
		<!--
		<div id="appHeader" class="navbar navbar-default">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				
				<form class="navbar-search pull-left" action="">
					<button type="button" style="margin-top:7px; margin-left:7px;" class="btn btn-primary" onclick="javascript:runProgram();">Run</button>
				</form>
			</div>
		</div>
		-->
				
		<div id="mycontainer">
			<canvas id="mainCanvas"></canvas>	
			<!-- <canvas id="text" width="256" height="512"></canvas>		 -->
		</div>
				
	</body>
	
	<script id="simple.vs" type="x-shader/x-vertex">
		uniform mat4 matProjection;
		uniform mat4 matModelView;
		//uniform mat3 matNormalView;
		
		//uniform vec3 vLightPos;
		
		attribute vec3 vPos;
		//attribute vec3 vNormal;
		attribute vec2 vTex0;
		
		// Colour to fragment shader
		//varying highp vec4 vVaryingCol;
		//varying highp vec3 vVaryingEyeNormal;
		//varying highp vec3 vVaryingLightDir;
		//varying highp vec3 vVaryingPosition;

		varying highp vec2 vVaryingTex0;
		
		//
		
		void main(void)
		{
			

   			
			/*
			// Get surface normal in eye coordinates
			vVaryingEyeNormal = matNormalView * vNormal.xyz;

			// Get vertex position in eye coordinates
			vec4 eyePos4 = matModelView * vPos;
			vVaryingPosition = eyePos4.xyz / eyePos4.w;

			// Get vector to light source
			// vVaryingLightDir = normalize(vLightPos - pos3);

			//vVaryingPosition = pos3;

			// Obtain coords for tex 0
			vVaryingTex0 = vTex0.st;

			// Transform the geometry
			gl_Position = matProjection * eyePos4;
			*/
			
			vVaryingTex0 = vTex0;
			
			gl_Position = matProjection * matModelView * vec4(vPos, 1.0);
		}			
	</script>
	
	<script id="simple.fs" type="x-shader/x-fragment">
		//#ifdef GL_ES
		//	precision highp float;
		//#endif
		precision mediump float;

		uniform sampler2D renderedTexture;
		
		varying highp vec2 vVaryingTex0;
		
		// fxaa
		// ref: https://github.com/mattdesl/glsl-fxaa
		
		#ifndef FXAA_REDUCE_MIN
			#define FXAA_REDUCE_MIN   (1.0/ 128.0)
		#endif
		#ifndef FXAA_REDUCE_MUL
			#define FXAA_REDUCE_MUL   (1.0 / 8.0)
		#endif
		#ifndef FXAA_SPAN_MAX
			#define FXAA_SPAN_MAX     8.0
		#endif		
		
		vec2 v_rgbNW;
		vec2 v_rgbNE;
		vec2 v_rgbSW;
		vec2 v_rgbSE;
		vec2 v_rgbM;

		uniform vec2 resolution;
					
		//optimized version for mobile, where dependent 
		//texture reads can be a bottleneck
		//To save 9 dependent texture reads, you can compute
		//these in the vertex shader and use the optimized
		//frag.glsl function in your frag shader. 

		//This is best suited for mobile devices, like iOS.	
			
		void texcoords(vec2 fragCoord, vec2 resolution) 
		{
			vec2 inverseVP = 1.0 / resolution.xy;
			v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
			v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
			v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
			v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
			v_rgbM = vec2(fragCoord * inverseVP);
		}
		
		vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution) 
		{
			vec4 color;
			mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);
			vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
			vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
			vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
			vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
			vec4 texColor = texture2D(tex, v_rgbM);
			vec3 rgbM  = texColor.xyz;
			vec3 luma = vec3(0.299, 0.587, 0.114);
			float lumaNW = dot(rgbNW, luma);
			float lumaNE = dot(rgbNE, luma);
			float lumaSW = dot(rgbSW, luma);
			float lumaSE = dot(rgbSE, luma);
			float lumaM  = dot(rgbM,  luma);
			float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
			float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));
			
			mediump vec2 dir;
			dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
			dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));
			
			float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
								  (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);
			
			float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
			dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
					  max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
					  dir * rcpDirMin)) * inverseVP;
			
			vec3 rgbA = 0.5 * (
				texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
				texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
			vec3 rgbB = rgbA * 0.5 + 0.25 * (
				texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
				texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

			float lumaB = dot(rgbB, luma);
			if ((lumaB < lumaMin) || (lumaB > lumaMax))
				color = vec4(rgbA, texColor.a);
			else
				color = vec4(rgbB, texColor.a);
			return color;
		}
		
		//

		void main(void) {				
			// FXAA render
			vec2 fragCoord = vVaryingTex0 * resolution; 
			texcoords(fragCoord, resolution);
			gl_FragColor = fxaa(renderedTexture, fragCoord, resolution);
			
			// Non FXAA render
			//gl_FragColor = texture2D(renderedTexture, vec2(vVaryingTex0.s, vVaryingTex0.t));
			
			//gl_FragColor = vec4(vVaryingTex0.s, vVaryingTex0.s, vVaryingTex0.s, 1.0);
			//gl_FragColor = vec4(vVaryingTex0.t, vVaryingTex0.t, vVaryingTex0.t, 1.0);
			
			//gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
		} 
	</script>
	
	<!-- -->
	
	<script id="colourmap.vs" type="x-shader/x-vertex">
		uniform mat4 matProjection;
		uniform mat4 matModelView;
		
		attribute vec3 vPos;
		
		void main(void)
		{			
			gl_Position = matProjection * matModelView * vec4(vPos, 1.0);
		}			
	</script>
		
	<script id="colourmap.fs" type="x-shader/x-fragment">
		precision mediump float;
		
		uniform vec4 colorMap;
		
		void main(void) {			
			gl_FragColor = colorMap;
		} 
	</script>	
	
	<!-- -->
		
	<script language="javascript" type="text/javascript">
		var oAppHeader;
		var oMyContainer;
		var oMainCanvas;
		
		var gl;
		var bInitialised = false;
		var bPerformUpdate = false;
		
		var shPrgPersp;
		var shPrgLayout;
		var shPrgColourMap;
		
		var img_texture_quad;
		var texture_quad;
		
		//
		
		var buffer_vertex_appIcon;	
		
		vertex_appIcon = [
			 16.0,  16.0,  0.0,  1.0,  1.0,
			 -16.0,  16.0,  0.0,  0.0,  1.0,
			 16.0, -16.0,  0.0,  1.0,  0.0,
			 -16.0, -16.0,  0.0,  0.0,  0.0
		];	
		
		//	
				
		var buffer_vertex_data_quad;	
		
		vertex_data_quad = [
			  128.0,  128.0,  0.0,  	1.0,  1.0,
			 -128.0,  128.0,  0.0,  	0.0,  1.0,
			  128.0, -128.0,  0.0,  	1.0,  0.0,
			 -128.0, -128.0,  0.0,  	0.0,  0.0
		];	
		
		//	
		
		var buffer_vertex_model_one;	
		
		vertex_model_one = [
			//	  100.0,  100.0,  0.0,  	1.0,  1.0,
			//	    0.0,  100.0,  0.0,  	0.0,  1.0,
			//	  100.0,    0.0,  0.0,  	1.0,  0.0,
			//	    0.0,    0.0,  0.0,  	0.0,  0.0
			
			/*
			-100.000, 100.000, 100.000, 0.43000, 0.07000,
			-100.000, 100.000, -100.000, 0.43000, 0.43000,
			-100.000, -100.000, -100.000, 0.07000, 0.43000,
			100.000, 100.000, 100.000, 0.93000, 0.57000,
			100.000, 100.000, -100.000, 0.93000, 0.93000,
			-100.000, 100.000, -100.000, 0.57000, 0.93000,
			100.000, -100.000, 100.000, 0.93000, 0.07000,
			100.000, -100.000, -100.000, 0.93000, 0.43000,
			100.000, 100.000, -100.000, 0.57000, 0.43000,
			-100.000, -100.000, 100.000, 0.43000, 0.57000,
			-100.000, -100.000, -100.000, 0.43000, 0.93000,
			100.000, -100.000, -100.000, 0.07000, 0.93000,
			-100.000, 100.000, -100.000, 0.92767, 0.07233,
			100.000, 100.000, -100.000, 0.92767, 0.42767,
			100.000, -100.000, -100.000, 0.57233, 0.42767,
			100.000, 100.000, 100.000, 0.92500, 0.57500,
			-100.000, 100.000, 100.000, 0.92500, 0.92500,
			-100.000, -100.000, 100.000, 0.57500, 0.92500,
			-100.000, -100.000, 100.000, 0.07000, 0.07000,
			-100.000, 100.000, 100.000, 0.43000, 0.07000,
			-100.000, -100.000, -100.000, 0.07000, 0.43000,
			-100.000, 100.000, 100.000, 0.57000, 0.57000,
			100.000, 100.000, 100.000, 0.93000, 0.57000,
			-100.000, 100.000, -100.000, 0.57000, 0.93000,
			100.000, 100.000, 100.000, 0.57000, 0.07000,
			100.000, -100.000, 100.000, 0.93000, 0.07000,
			100.000, 100.000, -100.000, 0.57000, 0.43000,
			100.000, -100.000, 100.000, 0.07000, 0.57000,
			-100.000, -100.000, 100.000, 0.43000, 0.57000,
			100.000, -100.000, -100.000, 0.07000, 0.93000,
			-100.000, -100.000, -100.000, 0.57233, 0.07233,
			-100.000, 100.000, -100.000, 0.92767, 0.07233,
			100.000, -100.000, -100.000, 0.57233, 0.42767,
			100.000, -100.000, 100.000, 0.57500, 0.57500,
			100.000, 100.000, 100.000, 0.92500, 0.57500,
			-100.000, -100.000, 100.000, 0.57500, 0.92500,
			*/
			
			
			48.602, 65.022, -55.668, 0.50919, 0.47305,
			38.602, 65.022, -55.668, 0.50919, 0.42083,
			38.602, 74.931, -57.010, 0.56483, 0.42083,
			48.602, 79.788, 53.337, 0.05819, 0.47305,
			48.602, 65.022, -55.668, 0.50919, 0.47305,
			48.602, 74.931, -57.010, 0.50919, 0.52579,
			38.602, 79.788, 53.337, 0.05819, 0.42083,
			48.602, 79.788, 53.337, 0.05819, 0.47305,
			48.602, 89.698, 51.994, 0.00887, 0.47305,
			48.602, 65.022, -55.668, 0.50919, 0.47305,
			48.602, 79.788, 53.337, 0.05819, 0.47305,
			38.602, 79.788, 53.337, 0.05819, 0.42083,
			38.602, 74.931, -57.010, 0.50919, 0.57826,
			38.602, 89.698, 51.994, 0.05819, 0.57826,
			48.602, 89.698, 51.994, 0.05819, 0.52579,
			44.860, 79.601, 44.523, 0.51228, 0.76483,
			54.860, -0.399, 64.523, 0.15746, 0.76483,
			56.676, 0.399, 58.932, 0.15746, 0.72909,
			37.166, 79.601, 38.932, 0.51228, 0.65655,
			41.921, 79.601, 35.477, 0.51228, 0.69289,
			51.921, -0.399, 55.477, 0.15746, 0.69289,
			46.676, 79.601, 38.932, 0.51228, 0.72909,
			56.676, 0.399, 58.932, 0.15746, 0.72909,
			51.921, -0.399, 55.477, 0.15746, 0.69289,
			38.982, 79.601, 44.523, 0.51228, 0.80105,
			37.166, 79.601, 38.932, 0.51228, 0.83712,
			47.166, 0.100, 58.932, 0.15746, 0.83712,
			44.860, 79.601, 44.523, 0.51228, 0.76483,
			38.982, 79.601, 44.523, 0.51228, 0.80105,
			48.982, -0.399, 64.523, 0.15746, 0.80105,
			43.181, 69.601, -44.523, 0.97476, 0.52437,
			47.936, 69.601, -41.068, 0.97476, 0.56822,
			56.676, 0.074, -61.068, 0.63238, 0.56839,
			38.426, 69.601, -41.068, 0.97476, 0.48048,
			47.166, 0.074, -61.068, 0.63238, 0.48048,
			48.982, -0.399, -55.477, 0.63238, 0.43647,
			46.120, 69.601, -35.477, 0.97476, 0.61229,
			40.242, 69.601, -35.477, 0.97476, 0.65643,
			48.982, -0.399, -55.477, 0.63238, 0.65639,
			47.936, 69.601, -41.068, 0.97476, 0.56822,
			46.120, 69.601, -35.477, 0.97476, 0.61229,
			54.860, -0.399, -55.477, 0.63238, 0.61229,
			43.181, 69.601, -44.523, 0.97476, 0.52437,
			51.921, -0.399, -64.523, 0.63238, 0.52437,
			47.166, 0.074, -61.068, 0.63238, 0.48048,
			23.820, 82.926, 47.938, 0.48016, 0.31405,
			40.542, 86.855, 47.408, 0.48016, 0.40234,
			40.542, 74.154, -46.713, 0.01436, 0.40234,
			46.760, 204.479, -57.837, 0.88197, 0.83052,
			41.042, 204.479, -57.837, 0.88197, 0.86307,
			41.042, 87.881, -42.181, 0.61545, 0.86307,
			46.780, 118.271, -47.685, 0.52742, 0.88905,
			46.780, 127.499, 19.952, 0.20034, 0.88905,
			41.013, 127.499, 19.952, 0.20034, 0.85632,
			48.527, 203.756, -63.227, 0.88197, 0.79862,
			46.760, 204.479, -57.837, 0.88197, 0.83052,
			46.760, 87.881, -42.181, 0.61545, 0.83052,
			41.013, 118.271, -47.685, 0.52742, 0.98807,
			41.013, 127.499, 19.952, 0.20034, 0.98807,
			41.013, 133.212, 19.168, 0.20034, 0.95534,
			43.901, 86.710, -50.902, 0.61545, 0.76639,
			48.527, 87.158, -47.571, 0.61545, 0.79862,
			47.705, 75.633, -45.754, 0.54211, 0.79862,
			45.981, 212.827, -60.040, 0.93558, 0.83052,
			41.821, 212.827, -60.040, 0.93558, 0.86307,
			41.042, 204.479, -57.837, 0.88197, 0.86307,
			41.550, 76.228, -41.321, 0.54211, 0.69966,
			41.042, 87.881, -42.181, 0.61545, 0.69966,
			39.275, 87.158, -47.571, 0.61545, 0.73313,
			46.760, 87.881, -42.181, 0.61545, 0.83052,
			41.042, 87.881, -42.181, 0.61545, 0.86307,
			41.550, 76.228, -41.321, 0.54211, 0.86307,
			48.527, 87.158, -47.571, 0.61545, 0.79862,
			46.760, 87.881, -42.181, 0.61545, 0.83052,
			46.252, 76.228, -41.321, 0.54211, 0.83052,
			43.901, 86.710, -50.902, 0.61545, 0.76639,
			43.901, 75.265, -48.493, 0.54211, 0.76639,
			40.097, 75.633, -45.754, 0.54211, 0.73313,
			45.981, 212.827, -60.040, 0.96612, 0.69011,
			47.266, 212.300, -63.960, 0.98525, 0.71475,
			40.536, 212.300, -63.960, 0.93558, 0.73313,
			43.901, 211.975, -66.383, 0.96612, 0.74775,
			40.536, 212.300, -63.960, 0.93558, 0.73313,
			47.266, 212.300, -63.960, 0.98525, 0.71475,
			43.901, 203.308, -66.558, 0.88197, 0.76639,
			39.275, 203.756, -63.227, 0.88197, 0.73313,
			40.536, 212.300, -63.960, 0.93558, 0.73313,
			43.901, 203.308, -66.558, 0.88197, 0.76639,
			43.901, 211.975, -66.383, 0.93558, 0.76639,
			47.266, 212.300, -63.960, 0.93558, 0.79862,
			40.536, 212.300, -63.960, 0.93558, 0.73313,
			39.275, 203.756, -63.227, 0.88197, 0.73313,
			41.042, 204.479, -57.837, 0.88197, 0.69966,
			41.013, 123.984, -48.469, 0.52742, 0.95534,
			41.013, 133.212, 19.168, 0.20034, 0.95534,
			46.780, 133.212, 19.168, 0.20034, 0.92261,
			46.780, 118.271, -47.685, 0.52742, 0.88905,
			46.780, 123.984, -48.469, 0.52742, 0.92261,
			46.780, 133.212, 19.168, 0.20034, 0.92261,
			46.780, 127.499, 19.952, 0.20034, 0.88905,
			46.780, 133.212, 19.168, 0.16844, 0.88905,
			41.013, 133.212, 19.168, 0.16844, 0.85632,
			42.319, 80.101, 4.232, 0.55160, 0.48670,
			42.319, 128.418, 12.346, 0.55160, 0.68505,
			42.621, 129.070, 8.460, 0.52470, 0.68505,
			39.275, 87.158, -47.571, 0.61545, 0.73313,
			39.275, 203.756, -63.227, 0.88197, 0.73313,
			43.901, 203.308, -66.558, 0.88197, 0.76639,
			43.901, 203.308, -66.558, 0.88197, 0.76639,
			48.527, 203.756, -63.227, 0.88197, 0.79862,
			48.527, 87.158, -47.571, 0.61545, 0.79862,
			41.042, 87.881, -42.181, 0.61545, 0.69966,
			41.042, 204.479, -57.837, 0.88197, 0.69966,
			39.275, 203.756, -63.227, 0.88197, 0.73313,
			40.542, 81.900, 48.076, 0.50579, 0.40234,
			40.542, 86.855, 47.408, 0.48016, 0.40234,
			23.820, 82.926, 47.938, 0.48016, 0.31405,
			40.542, 69.199, -46.045, 0.96227, 0.40234,
			40.542, 81.900, 48.076, 0.50579, 0.40234,
			23.820, 77.971, 48.606, 0.50579, 0.31405,
			40.542, 69.199, -46.045, 0.96227, 0.40234,
			23.820, 65.270, -45.515, 0.96227, 0.31405,
			23.820, 70.225, -46.183, 0.98893, 0.31405,
			46.098, 32.312, 51.999, 0.53966, 0.91342,
			46.098, 32.312, -51.541, 0.97027, 0.91342,
			46.098, 26.889, -51.541, 0.97027, 0.87394,
			47.266, 212.300, -63.960, 0.93558, 0.79862,
			45.981, 212.827, -60.040, 0.93558, 0.83052,
			46.760, 204.479, -57.837, 0.88197, 0.83052,
			-46.921, 32.312, 49.490, 0.95760, 0.95243,
			-46.921, 32.312, 54.913, 0.95760, 0.91318,
			46.921, 32.312, 54.913, 0.55233, 0.91318,
			46.921, 32.312, 54.913, 0.55233, 0.91318,
			-46.921, 32.312, 54.913, 0.95760, 0.91318,
			-46.921, 26.889, 54.913, 0.95760, 0.87394,
			38.602, 65.022, -55.668, 0.50919, 0.63074,
			38.602, 79.788, 53.337, 0.05819, 0.63074,
			38.602, 89.698, 51.994, 0.05819, 0.57826,
			51.521, 26.889, -51.541, 0.97027, 0.99191,
			51.521, 32.312, -51.541, 0.97027, 0.95267,
			51.521, 32.312, 51.999, 0.53966, 0.95267,
			51.521, 32.312, -51.541, 0.97027, 0.95267,
			46.098, 32.312, -51.541, 0.97027, 0.91342,
			46.098, 32.312, 51.999, 0.53966, 0.91342,
			-48.408, 32.312, -53.625, 0.97027, 0.95243,
			-48.408, 32.312, -48.202, 0.97027, 0.91318,
			48.408, 32.312, -48.202, 0.53966, 0.91318,
			48.408, 32.312, -48.202, 0.53966, 0.91318,
			-48.408, 32.312, -48.202, 0.97027, 0.91318,
			-48.408, 26.889, -48.202, 0.97027, 0.87394,
			43.128, 129.223, -49.421, 0.10218, 0.98158,
			-43.128, 129.223, -49.421, 0.10217, 0.66238,
			-43.133, 130.637, -53.315, 0.13191, 0.66238,
			43.128, 188.711, -57.246, 0.07244, 0.66238,
			-43.128, 188.711, -57.246, 0.07245, 0.98158,
			-43.133, 190.124, -61.141, 0.04269, 0.98158,
			43.125, 202.495, -59.350, 0.10217, 0.66238,
			-43.125, 202.495, -59.350, 0.10218, 0.98158,
			-43.128, 198.625, -58.551, 0.07245, 0.98158,
			43.128, 168.882, -54.638, 0.07244, 0.66238,
			-43.128, 168.882, -54.638, 0.07245, 0.98158,
			-43.133, 170.295, -58.532, 0.04269, 0.98158,
			43.125, 133.093, -50.220, 0.07245, 0.98158,
			43.133, 130.637, -53.315, 0.04269, 0.98158,
			-43.133, 130.637, -53.315, 0.04269, 0.66238,
			43.133, 150.466, -55.924, 0.04269, 0.66238,
			43.128, 149.052, -52.030, 0.07244, 0.66238,
			-43.128, 149.052, -52.030, 0.07245, 0.98158,
			43.125, 133.093, -50.220, 0.07245, 0.98158,
			-43.125, 133.093, -50.220, 0.07244, 0.66238,
			-43.128, 129.223, -49.421, 0.10217, 0.66238,
			-44.860, 79.601, 44.523, 0.51228, 0.76483,
			-46.676, 79.601, 38.932, 0.51228, 0.72909,
			-56.676, 0.399, 58.932, 0.15746, 0.72909,
			-51.921, -0.399, 55.477, 0.15746, 0.69289,
			-41.921, 79.601, 35.477, 0.51228, 0.69289,
			-37.166, 79.601, 38.932, 0.51228, 0.65655,
			-46.676, 79.601, 38.932, 0.51228, 0.72909,
			-41.921, 79.601, 35.477, 0.51228, 0.69289,
			-51.921, -0.399, 55.477, 0.15746, 0.69289,
			-47.166, 0.100, 58.932, 0.15746, 0.83712,
			-37.166, 79.601, 38.932, 0.51228, 0.83712,
			-38.982, 79.601, 44.523, 0.51228, 0.80105,
			-48.982, -0.399, 64.523, 0.15746, 0.80105,
			-38.982, 79.601, 44.523, 0.51228, 0.80105,
			-44.860, 79.601, 44.523, 0.51228, 0.76483,
			-56.676, 0.074, -61.068, 0.63238, 0.56852,
			-47.936, 69.601, -41.068, 0.97476, 0.56852,
			-43.181, 69.601, -44.523, 0.97476, 0.52467,
			-38.426, 69.601, -41.068, 0.97476, 0.48061,
			-40.242, 69.601, -35.477, 0.97476, 0.43647,
			-48.982, -0.399, -55.477, 0.63238, 0.43650,
			-48.982, -0.399, -55.477, 0.63238, 0.65643,
			-40.242, 69.601, -35.477, 0.97476, 0.65643,
			-46.120, 69.601, -35.477, 0.97476, 0.61242,
			-54.860, -0.399, -55.477, 0.63238, 0.61242,
			-46.120, 69.601, -35.477, 0.97476, 0.61242,
			-47.936, 69.601, -41.068, 0.97476, 0.56852,
			-43.181, 69.601, -44.523, 0.97476, 0.52467,
			-38.426, 69.601, -41.068, 0.97476, 0.48061,
			-47.166, 0.074, -61.068, 0.63238, 0.48061,
			-23.820, 70.225, -46.183, 0.01436, 0.09854,
			-40.542, 74.154, -46.713, 0.01436, 0.01190,
			-40.542, 86.855, 47.408, 0.48016, 0.01190,
			-41.042, 87.881, -42.181, 0.61545, 0.86307,
			-41.042, 204.479, -57.837, 0.88197, 0.86307,
			-46.760, 204.479, -57.837, 0.88197, 0.83052,
			-41.013, 127.499, 19.952, 0.20034, 0.85632,
			-46.780, 127.499, 19.952, 0.20034, 0.88905,
			-46.780, 118.271, -47.685, 0.52742, 0.88905,
			-48.527, 87.158, -47.571, 0.61545, 0.79862,
			-46.760, 87.881, -42.181, 0.61545, 0.83052,
			-46.760, 204.479, -57.837, 0.88197, 0.83052,
			-41.013, 133.212, 19.168, 0.20034, 0.95534,
			-41.013, 127.499, 19.952, 0.20034, 0.98807,
			-41.013, 118.271, -47.685, 0.52742, 0.98807,
			-47.705, 75.633, -45.754, 0.54211, 0.79862,
			-48.527, 87.158, -47.571, 0.61545, 0.79862,
			-43.901, 86.710, -50.902, 0.61545, 0.76639,
			-41.042, 204.479, -57.837, 0.88197, 0.86307,
			-41.821, 212.827, -60.040, 0.93558, 0.86307,
			-45.981, 212.827, -60.040, 0.93558, 0.83052,
			-40.097, 75.633, -45.754, 0.54211, 0.73313,
			-39.275, 87.158, -47.571, 0.61545, 0.73313,
			-41.042, 87.881, -42.181, 0.61545, 0.69966,
			-41.550, 76.228, -41.321, 0.54211, 0.86307,
			-41.042, 87.881, -42.181, 0.61545, 0.86307,
			-46.760, 87.881, -42.181, 0.61545, 0.83052,
			-47.705, 75.633, -45.754, 0.54211, 0.79862,
			-46.252, 76.228, -41.321, 0.54211, 0.83052,
			-46.760, 87.881, -42.181, 0.61545, 0.83052,
			-43.901, 86.710, -50.902, 0.61545, 0.76639,
			-39.275, 87.158, -47.571, 0.61545, 0.73313,
			-40.097, 75.633, -45.754, 0.54211, 0.73313,
			-40.536, 212.300, -63.960, 0.93558, 0.73313,
			-47.266, 212.300, -63.960, 0.98525, 0.71475,
			-45.981, 212.827, -60.040, 0.96612, 0.69011,
			-43.901, 211.975, -66.383, 0.96612, 0.74775,
			-47.266, 212.300, -63.960, 0.98525, 0.71475,
			-40.536, 212.300, -63.960, 0.93558, 0.73313,
			-40.536, 212.300, -63.960, 0.93558, 0.73313,
			-39.275, 203.756, -63.227, 0.88197, 0.73313,
			-43.901, 203.308, -66.558, 0.88197, 0.76639,
			-43.901, 203.308, -66.558, 0.88197, 0.76639,
			-48.527, 203.756, -63.227, 0.88197, 0.79862,
			-47.266, 212.300, -63.960, 0.93558, 0.79862,
			-40.536, 212.300, -63.960, 0.93558, 0.73313,
			-41.821, 212.827, -60.040, 0.93558, 0.69966,
			-41.042, 204.479, -57.837, 0.88197, 0.69966,
			-46.780, 133.212, 19.168, 0.20034, 0.92261,
			-41.013, 133.212, 19.168, 0.20034, 0.95534,
			-41.013, 123.984, -48.469, 0.52742, 0.95534,
			-46.780, 118.271, -47.685, 0.52742, 0.88905,
			-46.780, 127.499, 19.952, 0.20034, 0.88905,
			-46.780, 133.212, 19.168, 0.20034, 0.92261,
			-41.013, 133.212, 19.168, 0.16844, 0.85632,
			-46.780, 133.212, 19.168, 0.16844, 0.88905,
			-46.780, 127.499, 19.952, 0.20034, 0.88905,
			-42.621, 80.754, 0.346, 0.52470, 0.48670,
			-42.621, 129.070, 8.460, 0.52470, 0.68505,
			-42.319, 128.418, 12.346, 0.55161, 0.68505,
			-39.275, 87.158, -47.571, 0.61545, 0.73313,
			-43.901, 86.710, -50.902, 0.61545, 0.76639,
			-43.901, 203.308, -66.558, 0.88197, 0.76639,
			-48.527, 87.158, -47.571, 0.61545, 0.79862,
			-48.527, 203.756, -63.227, 0.88197, 0.79862,
			-43.901, 203.308, -66.558, 0.88197, 0.76639,
			-41.042, 87.881, -42.181, 0.61545, 0.69966,
			-39.275, 87.158, -47.571, 0.61545, 0.73313,
			-39.275, 203.756, -63.227, 0.88197, 0.73313,
			-23.820, 82.926, 47.938, 0.48016, 0.09854,
			-40.542, 86.855, 47.408, 0.48016, 0.01190,
			-40.542, 81.900, 48.076, 0.50579, 0.01190,
			-48.408, 26.889, -53.625, 0.97027, 0.99191,
			-48.408, 32.312, -53.625, 0.97027, 0.95243,
			48.408, 32.312, -53.625, 0.53966, 0.95243,
			-46.098, 26.889, -51.541, 0.97027, 0.87394,
			-46.098, 32.312, -51.541, 0.97027, 0.91342,
			-46.098, 32.312, 51.999, 0.53966, 0.91342,
			-46.760, 204.479, -57.837, 0.88197, 0.83052,
			-45.981, 212.827, -60.040, 0.93558, 0.83052,
			-47.266, 212.300, -63.960, 0.93558, 0.79862,
			-51.521, 32.312, 51.999, 0.53966, 0.95267,
			-51.521, 32.312, -51.541, 0.97027, 0.95267,
			-51.521, 26.889, -51.541, 0.97027, 0.99191,
			-46.098, 32.312, 51.999, 0.53966, 0.91342,
			-46.098, 32.312, -51.541, 0.97027, 0.91342,
			-51.521, 32.312, -51.541, 0.97027, 0.95267,
			-46.921, 26.889, 49.490, 0.95760, 0.99191,
			-46.921, 32.312, 49.490, 0.95760, 0.95243,
			46.921, 32.312, 49.490, 0.55233, 0.95243,
			23.820, 77.971, 48.606, 0.50579, 0.31405,
			-23.820, 77.971, 48.606, 0.50579, 0.09854,
			-23.820, 65.270, -45.515, 0.96227, 0.09854,
			-23.820, 77.971, 48.606, 0.50579, 0.09854,
			-40.542, 81.900, 48.076, 0.50579, 0.01190,
			-40.542, 69.199, -46.045, 0.96227, 0.01190,
			23.820, 65.270, -45.515, 0.96227, 0.31405,
			-23.820, 65.270, -45.515, 0.96227, 0.09854,
			-23.820, 70.225, -46.183, 0.98893, 0.09854,
			23.820, 70.225, -46.183, 0.01436, 0.31405,
			-23.820, 70.225, -46.183, 0.01436, 0.09854,
			-23.820, 82.926, 47.938, 0.48016, 0.09854,
			-40.542, 69.199, -46.045, 0.96227, 0.01190,
			-40.542, 74.154, -46.713, 0.98893, 0.01190,
			-23.820, 70.225, -46.183, 0.98893, 0.09854,
			23.820, 82.926, 47.938, 0.48016, 0.31405,
			-23.820, 82.926, 47.938, 0.48016, 0.09854,
			-23.820, 77.971, 48.606, 0.50579, 0.09854,
			43.125, 114.591, -46.931, 0.10217, 0.66238,
			-43.125, 114.591, -46.931, 0.10218, 0.98158,
			-43.128, 110.649, -46.643, 0.07245, 0.98158,
			43.125, 202.495, -59.350, 0.10217, 0.66238,
			43.133, 200.039, -62.445, 0.13191, 0.66238,
			-43.133, 200.039, -62.445, 0.13191, 0.98156,
			43.125, 152.923, -52.829, 0.10217, 0.66238,
			-43.125, 152.923, -52.829, 0.10218, 0.98158,
			-43.128, 149.052, -52.030, 0.07245, 0.98158,
			43.125, 192.581, -58.045, 0.10217, 0.66238,
			43.133, 190.124, -61.141, 0.13191, 0.66238,
			-43.133, 190.124, -61.141, 0.13191, 0.98158,
			43.128, 110.649, -46.643, 0.07244, 0.66238,
			-43.128, 110.649, -46.643, 0.07245, 0.98158,
			-43.133, 112.559, -50.320, 0.04269, 0.98158,
			43.128, 198.625, -58.551, 0.07244, 0.66238,
			-43.128, 198.625, -58.551, 0.07245, 0.98158,
			-43.133, 200.039, -62.445, 0.04269, 0.98158,
			43.125, 172.752, -55.437, 0.10217, 0.66238,
			-43.125, 172.752, -55.437, 0.10218, 0.98158,
			-43.128, 168.882, -54.638, 0.07245, 0.98158,
			43.125, 192.581, -58.045, 0.10217, 0.66238,
			-43.125, 192.581, -58.045, 0.10218, 0.98158,
			-43.128, 188.711, -57.246, 0.07245, 0.98158,
			43.133, 150.466, -55.924, 0.13191, 0.66238,
			-43.133, 150.466, -55.924, 0.13191, 0.98156,
			-43.125, 152.923, -52.829, 0.10218, 0.98158,
			43.125, 114.591, -46.931, 0.10217, 0.66238,
			43.133, 112.559, -50.320, 0.13191, 0.66238,
			-43.133, 112.559, -50.320, 0.13191, 0.98158,
			43.133, 170.295, -58.532, 0.13191, 0.66238,
			-43.133, 170.295, -58.532, 0.13191, 0.98158,
			-43.125, 172.752, -55.437, 0.10218, 0.98158,
			42.621, 129.070, 8.460, 0.60541, 0.68505,
			45.973, 128.667, 10.861, 0.57850, 0.68505,
			45.973, 80.351, 2.748, 0.57850, 0.48670,
			45.973, 128.667, 10.861, 0.57850, 0.68505,
			42.319, 128.418, 12.346, 0.55160, 0.68505,
			42.319, 80.101, 4.232, 0.55160, 0.48670,
			-45.973, 80.351, 2.748, 0.57851, 0.48670,
			-45.973, 128.667, 10.861, 0.57851, 0.68505,
			-42.621, 129.070, 8.460, 0.60541, 0.68505,
			-42.319, 80.101, 4.232, 0.55161, 0.48670,
			-42.319, 128.418, 12.346, 0.55161, 0.68505,
			-45.973, 128.667, 10.861, 0.57851, 0.68505,
			-38.602, 74.931, -57.010, 0.56483, 0.42083,
			-38.602, 65.022, -55.668, 0.50919, 0.42083,
			-48.602, 65.022, -55.668, 0.50919, 0.47305,
			-48.602, 74.931, -57.010, 0.50919, 0.52579,
			-48.602, 65.022, -55.668, 0.50919, 0.47305,
			-48.602, 79.788, 53.337, 0.05819, 0.47305,
			-48.602, 89.698, 51.994, 0.00887, 0.47305,
			-48.602, 79.788, 53.337, 0.05819, 0.47305,
			-38.602, 79.788, 53.337, 0.05819, 0.42083,
			-38.602, 79.788, 53.337, 0.05819, 0.42083,
			-48.602, 79.788, 53.337, 0.05819, 0.47305,
			-48.602, 65.022, -55.668, 0.50919, 0.47305,
			-48.602, 89.698, 51.994, 0.05819, 0.52579,
			-38.602, 89.698, 51.994, 0.05819, 0.57826,
			-38.602, 74.931, -57.010, 0.50919, 0.57826,
			-38.602, 89.698, 51.994, 0.05819, 0.57826,
			-38.602, 79.788, 53.337, 0.05819, 0.63074,
			-38.602, 65.022, -55.668, 0.50919, 0.63074,
			48.602, 74.931, -57.010, 0.56483, 0.47305,
			48.602, 65.022, -55.668, 0.50919, 0.47305,
			38.602, 74.931, -57.010, 0.56483, 0.42083,
			48.602, 89.698, 51.994, 0.05819, 0.52579,
			48.602, 79.788, 53.337, 0.05819, 0.47305,
			48.602, 74.931, -57.010, 0.50919, 0.52579,
			38.602, 89.698, 51.994, 0.00887, 0.42083,
			38.602, 79.788, 53.337, 0.05819, 0.42083,
			48.602, 89.698, 51.994, 0.00887, 0.47305,
			38.602, 65.022, -55.668, 0.50919, 0.42083,
			48.602, 65.022, -55.668, 0.50919, 0.47305,
			38.602, 79.788, 53.337, 0.05819, 0.42083,
			48.602, 74.931, -57.010, 0.50919, 0.52579,
			38.602, 74.931, -57.010, 0.50919, 0.57826,
			48.602, 89.698, 51.994, 0.05819, 0.52579,
			46.676, 79.601, 38.932, 0.51228, 0.72909,
			44.860, 79.601, 44.523, 0.51228, 0.76483,
			56.676, 0.399, 58.932, 0.15746, 0.72909,
			47.166, 0.100, 58.932, 0.15746, 0.65655,
			37.166, 79.601, 38.932, 0.51228, 0.65655,
			51.921, -0.399, 55.477, 0.15746, 0.69289,
			41.921, 79.601, 35.477, 0.51228, 0.69289,
			46.676, 79.601, 38.932, 0.51228, 0.72909,
			51.921, -0.399, 55.477, 0.15746, 0.69289,
			48.982, -0.399, 64.523, 0.15746, 0.80105,
			38.982, 79.601, 44.523, 0.51228, 0.80105,
			47.166, 0.100, 58.932, 0.15746, 0.83712,
			54.860, -0.399, 64.523, 0.15746, 0.76483,
			44.860, 79.601, 44.523, 0.51228, 0.76483,
			48.982, -0.399, 64.523, 0.15746, 0.80105,
			51.921, -0.399, -64.523, 0.63238, 0.52437,
			43.181, 69.601, -44.523, 0.97476, 0.52437,
			56.676, 0.074, -61.068, 0.63238, 0.56839,
			40.242, 69.601, -35.477, 0.97476, 0.43647,
			38.426, 69.601, -41.068, 0.97476, 0.48048,
			48.982, -0.399, -55.477, 0.63238, 0.43647,
			54.860, -0.399, -55.477, 0.63238, 0.61229,
			46.120, 69.601, -35.477, 0.97476, 0.61229,
			48.982, -0.399, -55.477, 0.63238, 0.65639,
			56.676, 0.074, -61.068, 0.63238, 0.56839,
			47.936, 69.601, -41.068, 0.97476, 0.56822,
			54.860, -0.399, -55.477, 0.63238, 0.61229,
			38.426, 69.601, -41.068, 0.97476, 0.48048,
			43.181, 69.601, -44.523, 0.97476, 0.52437,
			47.166, 0.074, -61.068, 0.63238, 0.48048,
			23.820, 70.225, -46.183, 0.01436, 0.31405,
			23.820, 82.926, 47.938, 0.48016, 0.31405,
			40.542, 74.154, -46.713, 0.01436, 0.40234,
			46.760, 87.881, -42.181, 0.61545, 0.83052,
			46.760, 204.479, -57.837, 0.88197, 0.83052,
			41.042, 87.881, -42.181, 0.61545, 0.86307,
			41.013, 118.271, -47.685, 0.52742, 0.85632,
			46.780, 118.271, -47.685, 0.52742, 0.88905,
			41.013, 127.499, 19.952, 0.20034, 0.85632,
			48.527, 87.158, -47.571, 0.61545, 0.79862,
			48.527, 203.756, -63.227, 0.88197, 0.79862,
			46.760, 87.881, -42.181, 0.61545, 0.83052,
			41.013, 123.984, -48.469, 0.52742, 0.95534,
			41.013, 118.271, -47.685, 0.52742, 0.98807,
			41.013, 133.212, 19.168, 0.20034, 0.95534,
			43.901, 75.265, -48.493, 0.54211, 0.76639,
			43.901, 86.710, -50.902, 0.61545, 0.76639,
			47.705, 75.633, -45.754, 0.54211, 0.79862,
			46.760, 204.479, -57.837, 0.88197, 0.83052,
			45.981, 212.827, -60.040, 0.93558, 0.83052,
			41.042, 204.479, -57.837, 0.88197, 0.86307,
			40.097, 75.633, -45.754, 0.54211, 0.73313,
			41.550, 76.228, -41.321, 0.54211, 0.69966,
			39.275, 87.158, -47.571, 0.61545, 0.73313,
			46.252, 76.228, -41.321, 0.54211, 0.83052,
			46.760, 87.881, -42.181, 0.61545, 0.83052,
			41.550, 76.228, -41.321, 0.54211, 0.86307,
			47.705, 75.633, -45.754, 0.54211, 0.79862,
			48.527, 87.158, -47.571, 0.61545, 0.79862,
			46.252, 76.228, -41.321, 0.54211, 0.83052,
			39.275, 87.158, -47.571, 0.61545, 0.73313,
			43.901, 86.710, -50.902, 0.61545, 0.76639,
			40.097, 75.633, -45.754, 0.54211, 0.73313,
			41.821, 212.827, -60.040, 0.93558, 0.69966,
			45.981, 212.827, -60.040, 0.96612, 0.69011,
			40.536, 212.300, -63.960, 0.93558, 0.73313,
			43.901, 211.975, -66.383, 0.93558, 0.76639,
			43.901, 203.308, -66.558, 0.88197, 0.76639,
			40.536, 212.300, -63.960, 0.93558, 0.73313,
			48.527, 203.756, -63.227, 0.88197, 0.79862,
			43.901, 203.308, -66.558, 0.88197, 0.76639,
			47.266, 212.300, -63.960, 0.93558, 0.79862,
			41.821, 212.827, -60.040, 0.93558, 0.69966,
			40.536, 212.300, -63.960, 0.93558, 0.73313,
			41.042, 204.479, -57.837, 0.88197, 0.69966,
			46.780, 123.984, -48.469, 0.52742, 0.92261,
			41.013, 123.984, -48.469, 0.52742, 0.95534,
			46.780, 133.212, 19.168, 0.20034, 0.92261,
			46.780, 127.499, 19.952, 0.20034, 0.88905,
			46.780, 118.271, -47.685, 0.52742, 0.88905,
			46.780, 133.212, 19.168, 0.20034, 0.92261,
			41.013, 127.499, 19.952, 0.20034, 0.85632,
			46.780, 127.499, 19.952, 0.20034, 0.88905,
			41.013, 133.212, 19.168, 0.16844, 0.85632,
			42.621, 80.754, 0.346, 0.52470, 0.48670,
			42.319, 80.101, 4.232, 0.55160, 0.48670,
			42.621, 129.070, 8.460, 0.52470, 0.68505,
			43.901, 86.710, -50.902, 0.61545, 0.76639,
			39.275, 87.158, -47.571, 0.61545, 0.73313,
			43.901, 203.308, -66.558, 0.88197, 0.76639,
			43.901, 86.710, -50.902, 0.61545, 0.76639,
			43.901, 203.308, -66.558, 0.88197, 0.76639,
			48.527, 87.158, -47.571, 0.61545, 0.79862,
			39.275, 87.158, -47.571, 0.61545, 0.73313,
			41.042, 87.881, -42.181, 0.61545, 0.69966,
			39.275, 203.756, -63.227, 0.88197, 0.73313,
			23.820, 77.971, 48.606, 0.50579, 0.31405,
			40.542, 81.900, 48.076, 0.50579, 0.40234,
			23.820, 82.926, 47.938, 0.48016, 0.31405,
			23.820, 65.270, -45.515, 0.96227, 0.31405,
			40.542, 69.199, -46.045, 0.96227, 0.40234,
			23.820, 77.971, 48.606, 0.50579, 0.31405,
			40.542, 74.154, -46.713, 0.98893, 0.40234,
			40.542, 69.199, -46.045, 0.96227, 0.40234,
			23.820, 70.225, -46.183, 0.98893, 0.31405,
			46.098, 26.889, 51.999, 0.53966, 0.87394,
			46.098, 32.312, 51.999, 0.53966, 0.91342,
			46.098, 26.889, -51.541, 0.97027, 0.87394,
			48.527, 203.756, -63.227, 0.88197, 0.79862,
			47.266, 212.300, -63.960, 0.93558, 0.79862,
			46.760, 204.479, -57.837, 0.88197, 0.83052,
			46.921, 32.312, 49.490, 0.55233, 0.95243,
			-46.921, 32.312, 49.490, 0.95760, 0.95243,
			46.921, 32.312, 54.913, 0.55233, 0.91318,
			46.921, 26.889, 54.913, 0.55233, 0.87394,
			46.921, 32.312, 54.913, 0.55233, 0.91318,
			-46.921, 26.889, 54.913, 0.95760, 0.87394,
			38.602, 74.931, -57.010, 0.50919, 0.57826,
			38.602, 65.022, -55.668, 0.50919, 0.63074,
			38.602, 89.698, 51.994, 0.05819, 0.57826,
			51.521, 26.889, 51.999, 0.53966, 0.99191,
			51.521, 26.889, -51.541, 0.97027, 0.99191,
			51.521, 32.312, 51.999, 0.53966, 0.95267,
			51.521, 32.312, 51.999, 0.53966, 0.95267,
			51.521, 32.312, -51.541, 0.97027, 0.95267,
			46.098, 32.312, 51.999, 0.53966, 0.91342,
			48.408, 32.312, -53.625, 0.53966, 0.95243,
			-48.408, 32.312, -53.625, 0.97027, 0.95243,
			48.408, 32.312, -48.202, 0.53966, 0.91318,
			48.408, 26.889, -48.202, 0.53966, 0.87394,
			48.408, 32.312, -48.202, 0.53966, 0.91318,
			-48.408, 26.889, -48.202, 0.97027, 0.87394,
			43.133, 130.637, -53.315, 0.13191, 0.98158,
			43.128, 129.223, -49.421, 0.10218, 0.98158,
			-43.133, 130.637, -53.315, 0.13191, 0.66238,
			43.133, 190.124, -61.141, 0.04269, 0.66238,
			43.128, 188.711, -57.246, 0.07244, 0.66238,
			-43.133, 190.124, -61.141, 0.04269, 0.98158,
			43.128, 198.625, -58.551, 0.07244, 0.66238,
			43.125, 202.495, -59.350, 0.10217, 0.66238,
			-43.128, 198.625, -58.551, 0.07245, 0.98158,
			43.133, 170.295, -58.532, 0.04269, 0.66238,
			43.128, 168.882, -54.638, 0.07244, 0.66238,
			-43.133, 170.295, -58.532, 0.04269, 0.98158,
			-43.125, 133.093, -50.220, 0.07244, 0.66238,
			43.125, 133.093, -50.220, 0.07245, 0.98158,
			-43.133, 130.637, -53.315, 0.04269, 0.66238,
			-43.133, 150.466, -55.924, 0.04269, 0.98158,
			43.133, 150.466, -55.924, 0.04269, 0.66238,
			-43.128, 149.052, -52.030, 0.07245, 0.98158,
			43.128, 129.223, -49.421, 0.10218, 0.98158,
			43.125, 133.093, -50.220, 0.07245, 0.98158,
			-43.128, 129.223, -49.421, 0.10217, 0.66238,
			-54.860, -0.399, 64.523, 0.15746, 0.76483,
			-44.860, 79.601, 44.523, 0.51228, 0.76483,
			-56.676, 0.399, 58.932, 0.15746, 0.72909,
			-47.166, 0.100, 58.932, 0.15746, 0.65655,
			-51.921, -0.399, 55.477, 0.15746, 0.69289,
			-37.166, 79.601, 38.932, 0.51228, 0.65655,
			-56.676, 0.399, 58.932, 0.15746, 0.72909,
			-46.676, 79.601, 38.932, 0.51228, 0.72909,
			-51.921, -0.399, 55.477, 0.15746, 0.69289,
			-48.982, -0.399, 64.523, 0.15746, 0.80105,
			-47.166, 0.100, 58.932, 0.15746, 0.83712,
			-38.982, 79.601, 44.523, 0.51228, 0.80105,
			-54.860, -0.399, 64.523, 0.15746, 0.76483,
			-48.982, -0.399, 64.523, 0.15746, 0.80105,
			-44.860, 79.601, 44.523, 0.51228, 0.76483,
			-51.921, -0.399, -64.523, 0.63238, 0.52450,
			-56.676, 0.074, -61.068, 0.63238, 0.56852,
			-43.181, 69.601, -44.523, 0.97476, 0.52467,
			-47.166, 0.074, -61.068, 0.63238, 0.48061,
			-38.426, 69.601, -41.068, 0.97476, 0.48061,
			-48.982, -0.399, -55.477, 0.63238, 0.43650,
			-54.860, -0.399, -55.477, 0.63238, 0.61242,
			-48.982, -0.399, -55.477, 0.63238, 0.65643,
			-46.120, 69.601, -35.477, 0.97476, 0.61242,
			-56.676, 0.074, -61.068, 0.63238, 0.56852,
			-54.860, -0.399, -55.477, 0.63238, 0.61242,
			-47.936, 69.601, -41.068, 0.97476, 0.56852,
			-51.921, -0.399, -64.523, 0.63238, 0.52450,
			-43.181, 69.601, -44.523, 0.97476, 0.52467,
			-47.166, 0.074, -61.068, 0.63238, 0.48061,
			-23.820, 82.926, 47.938, 0.48016, 0.09854,
			-23.820, 70.225, -46.183, 0.01436, 0.09854,
			-40.542, 86.855, 47.408, 0.48016, 0.01190,
			-46.760, 87.881, -42.181, 0.61545, 0.83052,
			-41.042, 87.881, -42.181, 0.61545, 0.86307,
			-46.760, 204.479, -57.837, 0.88197, 0.83052,
			-41.013, 118.271, -47.685, 0.52742, 0.85632,
			-41.013, 127.499, 19.952, 0.20034, 0.85632,
			-46.780, 118.271, -47.685, 0.52742, 0.88905,
			-48.527, 203.756, -63.227, 0.88197, 0.79862,
			-48.527, 87.158, -47.571, 0.61545, 0.79862,
			-46.760, 204.479, -57.837, 0.88197, 0.83052,
			-41.013, 123.984, -48.469, 0.52742, 0.95534,
			-41.013, 133.212, 19.168, 0.20034, 0.95534,
			-41.013, 118.271, -47.685, 0.52742, 0.98807,
			-43.901, 75.265, -48.493, 0.54211, 0.76639,
			-47.705, 75.633, -45.754, 0.54211, 0.79862,
			-43.901, 86.710, -50.902, 0.61545, 0.76639,
			-46.760, 204.479, -57.837, 0.88197, 0.83052,
			-41.042, 204.479, -57.837, 0.88197, 0.86307,
			-45.981, 212.827, -60.040, 0.93558, 0.83052,
			-41.550, 76.228, -41.321, 0.54211, 0.69966,
			-40.097, 75.633, -45.754, 0.54211, 0.73313,
			-41.042, 87.881, -42.181, 0.61545, 0.69966,
			-46.252, 76.228, -41.321, 0.54211, 0.83052,
			-41.550, 76.228, -41.321, 0.54211, 0.86307,
			-46.760, 87.881, -42.181, 0.61545, 0.83052,
			-48.527, 87.158, -47.571, 0.61545, 0.79862,
			-47.705, 75.633, -45.754, 0.54211, 0.79862,
			-46.760, 87.881, -42.181, 0.61545, 0.83052,
			-43.901, 75.265, -48.493, 0.54211, 0.76639,
			-43.901, 86.710, -50.902, 0.61545, 0.76639,
			-40.097, 75.633, -45.754, 0.54211, 0.73313,
			-41.821, 212.827, -60.040, 0.93558, 0.69966,
			-40.536, 212.300, -63.960, 0.93558, 0.73313,
			-45.981, 212.827, -60.040, 0.96612, 0.69011,
			-43.901, 211.975, -66.383, 0.93558, 0.76639,
			-40.536, 212.300, -63.960, 0.93558, 0.73313,
			-43.901, 203.308, -66.558, 0.88197, 0.76639,
			-43.901, 211.975, -66.383, 0.93558, 0.76639,
			-43.901, 203.308, -66.558, 0.88197, 0.76639,
			-47.266, 212.300, -63.960, 0.93558, 0.79862,
			-39.275, 203.756, -63.227, 0.88197, 0.73313,
			-40.536, 212.300, -63.960, 0.93558, 0.73313,
			-41.042, 204.479, -57.837, 0.88197, 0.69966,
			-46.780, 123.984, -48.469, 0.52742, 0.92261,
			-46.780, 133.212, 19.168, 0.20034, 0.92261,
			-41.013, 123.984, -48.469, 0.52742, 0.95534,
			-46.780, 123.984, -48.469, 0.52742, 0.92261,
			-46.780, 118.271, -47.685, 0.52742, 0.88905,
			-46.780, 133.212, 19.168, 0.20034, 0.92261,
			-41.013, 127.499, 19.952, 0.20034, 0.85632,
			-41.013, 133.212, 19.168, 0.16844, 0.85632,
			-46.780, 127.499, 19.952, 0.20034, 0.88905,
			-42.319, 80.101, 4.232, 0.55161, 0.48670,
			-42.621, 80.754, 0.346, 0.52470, 0.48670,
			-42.319, 128.418, 12.346, 0.55161, 0.68505,
			-39.275, 203.756, -63.227, 0.88197, 0.73313,
			-39.275, 87.158, -47.571, 0.61545, 0.73313,
			-43.901, 203.308, -66.558, 0.88197, 0.76639,
			-43.901, 86.710, -50.902, 0.61545, 0.76639,
			-48.527, 87.158, -47.571, 0.61545, 0.79862,
			-43.901, 203.308, -66.558, 0.88197, 0.76639,
			-41.042, 204.479, -57.837, 0.88197, 0.69966,
			-41.042, 87.881, -42.181, 0.61545, 0.69966,
			-39.275, 203.756, -63.227, 0.88197, 0.73313,
			-23.820, 77.971, 48.606, 0.50579, 0.09854,
			-23.820, 82.926, 47.938, 0.48016, 0.09854,
			-40.542, 81.900, 48.076, 0.50579, 0.01190,
			48.408, 26.889, -53.625, 0.53966, 0.99191,
			-48.408, 26.889, -53.625, 0.97027, 0.99191,
			48.408, 32.312, -53.625, 0.53966, 0.95243,
			-46.098, 26.889, 51.999, 0.53966, 0.87394,
			-46.098, 26.889, -51.541, 0.97027, 0.87394,
			-46.098, 32.312, 51.999, 0.53966, 0.91342,
			-48.527, 203.756, -63.227, 0.88197, 0.79862,
			-46.760, 204.479, -57.837, 0.88197, 0.83052,
			-47.266, 212.300, -63.960, 0.93558, 0.79862,
			-51.521, 26.889, 51.999, 0.53966, 0.99191,
			-51.521, 32.312, 51.999, 0.53966, 0.95267,
			-51.521, 26.889, -51.541, 0.97027, 0.99191,
			-51.521, 32.312, 51.999, 0.53966, 0.95267,
			-46.098, 32.312, 51.999, 0.53966, 0.91342,
			-51.521, 32.312, -51.541, 0.97027, 0.95267,
			46.921, 26.889, 49.490, 0.55233, 0.99191,
			-46.921, 26.889, 49.490, 0.95760, 0.99191,
			46.921, 32.312, 49.490, 0.55233, 0.95243,
			23.820, 65.270, -45.515, 0.96227, 0.31405,
			23.820, 77.971, 48.606, 0.50579, 0.31405,
			-23.820, 65.270, -45.515, 0.96227, 0.09854,
			-23.820, 65.270, -45.515, 0.96227, 0.09854,
			-23.820, 77.971, 48.606, 0.50579, 0.09854,
			-40.542, 69.199, -46.045, 0.96227, 0.01190,
			23.820, 70.225, -46.183, 0.98893, 0.31405,
			23.820, 65.270, -45.515, 0.96227, 0.31405,
			-23.820, 70.225, -46.183, 0.98893, 0.09854,
			23.820, 82.926, 47.938, 0.48016, 0.31405,
			23.820, 70.225, -46.183, 0.01436, 0.31405,
			-23.820, 82.926, 47.938, 0.48016, 0.09854,
			-23.820, 65.270, -45.515, 0.96227, 0.09854,
			-40.542, 69.199, -46.045, 0.96227, 0.01190,
			-23.820, 70.225, -46.183, 0.98893, 0.09854,
			23.820, 77.971, 48.606, 0.50579, 0.31405,
			23.820, 82.926, 47.938, 0.48016, 0.31405,
			-23.820, 77.971, 48.606, 0.50579, 0.09854,
			43.128, 110.649, -46.643, 0.07244, 0.66238,
			43.125, 114.591, -46.931, 0.10217, 0.66238,
			-43.128, 110.649, -46.643, 0.07245, 0.98158,
			-43.125, 202.495, -59.350, 0.10218, 0.98158,
			43.125, 202.495, -59.350, 0.10217, 0.66238,
			-43.133, 200.039, -62.445, 0.13191, 0.98156,
			43.128, 149.052, -52.030, 0.07244, 0.66238,
			43.125, 152.923, -52.829, 0.10217, 0.66238,
			-43.128, 149.052, -52.030, 0.07245, 0.98158,
			-43.125, 192.581, -58.045, 0.10218, 0.98158,
			43.125, 192.581, -58.045, 0.10217, 0.66238,
			-43.133, 190.124, -61.141, 0.13191, 0.98158,
			43.133, 112.559, -50.320, 0.04269, 0.66238,
			43.128, 110.649, -46.643, 0.07244, 0.66238,
			-43.133, 112.559, -50.320, 0.04269, 0.98158,
			43.133, 200.039, -62.445, 0.04269, 0.66238,
			43.128, 198.625, -58.551, 0.07244, 0.66238,
			-43.133, 200.039, -62.445, 0.04269, 0.98158,
			43.128, 168.882, -54.638, 0.07244, 0.66238,
			43.125, 172.752, -55.437, 0.10217, 0.66238,
			-43.128, 168.882, -54.638, 0.07245, 0.98158,
			43.128, 188.711, -57.246, 0.07244, 0.66238,
			43.125, 192.581, -58.045, 0.10217, 0.66238,
			-43.128, 188.711, -57.246, 0.07245, 0.98158,
			43.125, 152.923, -52.829, 0.10217, 0.66238,
			43.133, 150.466, -55.924, 0.13191, 0.66238,
			-43.125, 152.923, -52.829, 0.10218, 0.98158,
			-43.125, 114.591, -46.931, 0.10218, 0.98158,
			43.125, 114.591, -46.931, 0.10217, 0.66238,
			-43.133, 112.559, -50.320, 0.13191, 0.98158,
			43.125, 172.752, -55.437, 0.10217, 0.66238,
			43.133, 170.295, -58.532, 0.13191, 0.66238,
			-43.125, 172.752, -55.437, 0.10218, 0.98158,
			42.621, 80.754, 0.346, 0.60541, 0.48670,
			42.621, 129.070, 8.460, 0.60541, 0.68505,
			45.973, 80.351, 2.748, 0.57850, 0.48670,
			45.973, 80.351, 2.748, 0.57850, 0.48670,
			45.973, 128.667, 10.861, 0.57850, 0.68505,
			42.319, 80.101, 4.232, 0.55160, 0.48670,
			-42.621, 80.754, 0.346, 0.60541, 0.48670,
			-45.973, 80.351, 2.748, 0.57851, 0.48670,
			-42.621, 129.070, 8.460, 0.60541, 0.68505,
			-45.973, 80.351, 2.748, 0.57851, 0.48670,
			-42.319, 80.101, 4.232, 0.55161, 0.48670,
			-45.973, 128.667, 10.861, 0.57851, 0.68505,
			-48.602, 74.931, -57.010, 0.56483, 0.47305,
			-38.602, 74.931, -57.010, 0.56483, 0.42083,
			-48.602, 65.022, -55.668, 0.50919, 0.47305,
			-48.602, 89.698, 51.994, 0.05819, 0.52579,
			-48.602, 74.931, -57.010, 0.50919, 0.52579,
			-48.602, 79.788, 53.337, 0.05819, 0.47305,
			-38.602, 89.698, 51.994, 0.00887, 0.42083,
			-48.602, 89.698, 51.994, 0.00887, 0.47305,
			-38.602, 79.788, 53.337, 0.05819, 0.42083,
			-38.602, 65.022, -55.668, 0.50919, 0.42083,
			-38.602, 79.788, 53.337, 0.05819, 0.42083,
			-48.602, 65.022, -55.668, 0.50919, 0.47305,
			-48.602, 74.931, -57.010, 0.50919, 0.52579,
			-48.602, 89.698, 51.994, 0.05819, 0.52579,
			-38.602, 74.931, -57.010, 0.50919, 0.57826,
			-38.602, 74.931, -57.010, 0.50919, 0.57826,
			-38.602, 89.698, 51.994, 0.05819, 0.57826,
			-38.602, 65.022, -55.668, 0.50919, 0.63074
			
			
		];			
		
		
		var buffer_vertex_frameBuffer;
		
		vertex_frameBuffer = [
			 512.0,  512.0,  0.0,  1.0,  1.0,
			 0.0,  512.0,  0.0,  0.0,  1.0,
			 512.0, 0.0,  0.0,  1.0,  0.0,
			 0.0, 0.0,  0.0,  0.0,  0.0
		];
		
		
		//
		
		var buffer_vertex_perspview;
		
		var vertex_perspview = [
		//	 512.0,  512.0,  0.0,  1.0,  1.0,
		//	 0.0,  512.0,  0.0,  0.0,  1.0,
		//	 512.0, 0.0,  0.0,  1.0,  0.0,
		//	 0.0, 0.0,  0.0,  0.0,  0.0
		];			
		
		//				

		var matModelView;
		var mvMatrixStack;
		
		var matProjection;
		
		var projectionW;
		var projectionH;
		
		//
		
		var arrTextures = [];
		var imagesforTextures = [];
		
		//
		
		var ctx;
		var textCanvas;
		
		//
		
		var sample_trans;
		
		//
		
		/*
		
		var texFramebuffer;
		var fboFrameBuffer;
		
		*/
		
		var texPerspView;
		var fboPerspView;		
		
		//
		
		var texColourMapUI;
		var fboColourMapUI;
		
		//
		
		var hammertime;
		
		//
		
		function loadImage(url, callback) {
			var image = new Image();
			image.src = url;
			image.onload = callback;
			return image;
		};	
		
		function loadImages(urls, callback) {
			
			var imagesToLoad = urls.length;

			// Called each time an image finished loading.
			var onImageLoad = function() {
				--imagesToLoad;
				// If all the images are loaded call the callback.
				if (imagesToLoad == 0) {
					callback(imagesforTextures);
				}
			};

			for (var ii = 0; ii < imagesToLoad; ++ii) {
				var image = loadImage(urls[ii], onImageLoad);
				imagesforTextures.push(image);
			}
		};				
		
		//

		function readScriptElement(shaderElement) {
			var strSrc = null;
			
			var shaderScript = document.getElementById(shaderElement);
			if (shaderScript) {
				strSrc = shaderScript.firstChild.textContent;	
			}
			
			return strSrc;
		};
		
		function simple_initShaders(shaderV, shaderF) {
			var bLinkStatus = false;
			var shaderProgram = null;
			
			var hVS;
			var hFS;
			
			// Read vertex shader script
			strSrcVS = readScriptElement(shaderV);
			if(strSrcVS) {
				
				// Create Vertex Shader
				hVS = gl.createShader(gl.VERTEX_SHADER);
				gl.shaderSource(hVS, strSrcVS);
				gl.compileShader(hVS);
				
				var resultV = gl.getShaderParameter(hVS, gl.COMPILE_STATUS);
				if(resultV) {
					
					// Read fragment shader script
					strSrcFS = readScriptElement(shaderF);
					if(strSrcFS) {
						
						// Create Fragment Shader
						hFS = gl.createShader(gl.FRAGMENT_SHADER);
						gl.shaderSource(hFS, strSrcFS);
						gl.compileShader(hFS);
						
						var resultF = gl.getShaderParameter(hFS, gl.COMPILE_STATUS);
						if(resultF) {
							
							// Create Shader Program
							shaderProgram = gl.createProgram();
							gl.attachShader(shaderProgram, hVS);
							gl.attachShader(shaderProgram, hFS);
							gl.linkProgram(shaderProgram);
							
							var resultP = gl.getProgramParameter(shaderProgram, gl.LINK_STATUS);
							if(resultP)	{
								
								// Shader program success
								
								bLinkStatus = true;
							}
							else {
								
								// Shader program fail
								
								alert("Program : " + gl.getProgramInfoLog(shaderProgram));
								
								glDeleteProgram(shaderProgram);
								
								bLinkStatus = false;
							}
							
							// Shader cleanup

							gl.deleteShader(hFS);
							gl.deleteShader(hVS);
						}
						else {
							
							// Fragment shader fail
							
							alert("Fragment shader: " + gl.getShaderInfoLog(hFS));
							
							gl.deleteShader(hFS);
							
							bLinkStatus = false;
						}
					}

				}
				else {
					
					// Vertex shader fail
					
					alert("Vertex shader: " + gl.getShaderInfoLog(hVS));
					
					gl.deleteShader(hVS);
					
					bLinkStatus = false;
				}
			}
			
			return {bLinkStatus : bLinkStatus, resultPrg : shaderProgram};
		};
		
		function onMouseDown(ev) {
			console.log(ev);
			
			
			if((ev.offsetX > 0) && (ev.offsetX < 32) && (ev.offsetY > 0) && (ev.offsetY < 32)){
				runProgram();
			}
			
			renderColourMapToFbo(fboColourMapUI);
			
			gl.bindFramebuffer(gl.FRAMEBUFFER, fboColourMapUI);
			
			var arrColour = new Uint8Array(1*1*4);
			gl.readPixels(ev.offsetX, projectionH-ev.offsetY, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, arrColour);
			
			console.log(arrColour);
			
			gl.bindFramebuffer(gl.FRAMEBUFFER, null);
			
			if( arrColour[0]==0 && arrColour[1]==255 && arrColour[2]==255 && arrColour[3]==255  )
			{
				runProgram();
			}			
			
		};
		
		function initInputSystem() {
			hammertime = new Hammer(oMainCanvas);
			
			//hammertime.on('press', function(ev) {
			//	console.log(ev);
			//});
			
			//hammertime.on('tap', function(ev) {
			//	console.log(ev);
			//});			
			
			//
			
			oMainCanvas.addEventListener("mousedown", onMouseDown);
		};
				
		function initGL(oCanvas) {
			try {				
				gl = oCanvas.getContext("webgl", { alpha:false, antialias:false });				
			
				//var ext = gl.getExtension('WEBGL_draw_buffers');
				//if (!ext) {
				//	alert("Cannot use WebGL Extensions !");
				//}			
			} 
			catch (e) {
			}
			if (!gl) {
				alert("Could not initialise WebGL !");
			}
		};

		function initShadersForPerspView() {
			var result = simple_initShaders("simple.vs", "simple.fs");
			if(true == result.bLinkStatus) {
				shPrgPersp = result.resultPrg;

				shPrgPersp.unif_projection_matrix = gl.getUniformLocation(shPrgPersp, "matProjection");
				console.log("shPrgPersp.unif_projection_matrix" + " " + shPrgPersp.unif_projection_matrix);

				shPrgPersp.unif_modelview_matrix = gl.getUniformLocation(shPrgPersp, "matModelView");
				console.log("shPrgPersp.unif_modelview_matrix" + " " + shPrgPersp.unif_modelview_matrix);
				
				shPrgPersp.attr_pos_quad = gl.getAttribLocation(shPrgPersp, "vPos");
				gl.enableVertexAttribArray(shPrgPersp.attr_pos_quad);
				console.log("shPrgPersp.attr_pos_quad" + " " + shPrgPersp.attr_pos_quad);
				
				shPrgPersp.attr_tex0 = gl.getAttribLocation(shPrgPersp, "vTex0");
				//gl.enableVertexAttribArray(shPrgPersp.attr_tex0);
				console.log("shPrgPersp.attr_tex0" + " " + shPrgPersp.attr_tex0);
				
				shPrgPersp.unif_id_tex = gl.getUniformLocation(shPrgPersp, "renderedTexture");	
				console.log("shPrgPersp.unif_id_tex" + " " + shPrgPersp.unif_id_tex);
				
				shPrgPersp.unif_id_resolution = gl.getUniformLocation(shPrgPersp, "resolution");	
				console.log("shPrgPersp.unif_id_resolution" + " " + shPrgPersp.unif_id_resolution);				
			}
		};
		
		function initShadersForLayout() {
			var result = simple_initShaders("simple.vs", "simple.fs");
			if(true == result.bLinkStatus) {
				shPrgLayout = result.resultPrg;

				shPrgLayout.unif_projection_matrix = gl.getUniformLocation(shPrgLayout, "matProjection");
				console.log("shPrgLayout.unif_projection_matrix" + " " + shPrgLayout.unif_projection_matrix);

				shPrgLayout.unif_modelview_matrix = gl.getUniformLocation(shPrgLayout, "matModelView");	
				console.log("shPrgLayout.unif_modelview_matrix" + " " + shPrgLayout.unif_modelview_matrix);
				
				shPrgLayout.attr_pos_quad = gl.getAttribLocation(shPrgLayout, "vPos");
				gl.enableVertexAttribArray(shPrgLayout.attr_pos_quad);
				console.log("shPrgLayout.attr_pos_quad" + " " + shPrgLayout.attr_pos_quad);
				
				shPrgLayout.attr_tex0 = gl.getAttribLocation(shPrgLayout, "vTex0");
				//gl.enableVertexAttribArray(shPrgLayout.attr_tex0);
				console.log("shPrgLayout.attr_tex0" + " " + shPrgLayout.attr_tex0);
				
				shPrgLayout.unif_id_tex = gl.getUniformLocation(shPrgLayout, "renderedTexture");
				console.log("shPrgLayout.unif_id_tex" + " " + shPrgLayout.unif_id_tex);			
				
				shPrgLayout.unif_id_resolution = gl.getUniformLocation(shPrgLayout, "resolution");	
				console.log("shPrgLayout.unif_id_resolution" + " " + shPrgLayout.unif_id_resolution);						
			}
		};
		
		function initShadersForColourMap() {
			var result = simple_initShaders("colourmap.vs", "colourmap.fs");
			if(true == result.bLinkStatus) {
				shPrgColourMap = result.resultPrg;
				
				shPrgColourMap.unif_projection_matrix = gl.getUniformLocation(shPrgColourMap, "matProjection");
				console.log("shPrgColourMap.unif_projection_matrix" + " " + shPrgColourMap.unif_projection_matrix);	

				shPrgColourMap.unif_modelview_matrix = gl.getUniformLocation(shPrgColourMap, "matModelView");
				console.log("shPrgColourMap.unif_modelview_matrix" + " " + shPrgColourMap.unif_modelview_matrix);	
				
				shPrgColourMap.attr_pos_quad = gl.getAttribLocation(shPrgColourMap, "vPos");
				gl.enableVertexAttribArray(shPrgColourMap.attr_pos_quad);
				console.log("shPrgColourMap.attr_pos_quad" + " " + shPrgColourMap.attr_pos_quad);				
				
				shPrgColourMap.colorMap = gl.getUniformLocation(shPrgColourMap, "colorMap");
				console.log("shPrgColourMap.colorMap" + " " + shPrgColourMap.colorMap);		
			}			
		};
		
		function initShaders() {
			initShadersForPerspView();
			
			initShadersForLayout();
			
			initShadersForColourMap();
		};		
		
		function initBuffers() {
			buffer_vertex_appIcon = gl.createBuffer();
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_appIcon);
			
			gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertex_appIcon), gl.STATIC_DRAW);
			
			buffer_vertex_appIcon.sizeVertex = 3;
			buffer_vertex_appIcon.sizeTex = 2;
			buffer_vertex_appIcon.numFaces = 4;
						
			gl.bindBuffer(gl.ARRAY_BUFFER, null);
						
			//
			
			buffer_vertex_data_quad = gl.createBuffer();
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_data_quad);
			
			gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertex_data_quad), gl.STATIC_DRAW);
			
			buffer_vertex_data_quad.sizeVertex = 3;
			buffer_vertex_data_quad.sizeTex = 2;
			buffer_vertex_data_quad.numFaces = 4;
						
			gl.bindBuffer(gl.ARRAY_BUFFER, null);
			
			//
			
			buffer_vertex_model_one = gl.createBuffer();
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_model_one);
			
			gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertex_model_one), gl.STATIC_DRAW);
			
			buffer_vertex_model_one.sizeVertex = 3;
			buffer_vertex_model_one.sizeTex = 2;
			buffer_vertex_model_one.numFaces = 3*246; //3*12; //3*246;
						
			gl.bindBuffer(gl.ARRAY_BUFFER, null);
			
			
			//
			
			/*
			buffer_vertex_frameBuffer = gl.createBuffer();
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_frameBuffer);
			
			gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertex_frameBuffer), gl.STATIC_DRAW);
			
			buffer_vertex_frameBuffer.sizeVertex = 3;
			buffer_vertex_frameBuffer.sizeTex = 2;
			buffer_vertex_frameBuffer.numFaces = 4;
						
			gl.bindBuffer(gl.ARRAY_BUFFER, null);	
			
			*/
					
		};
		
		//
		
		function initColourMapUI() {
			
			//
			
			texColourMapUI = createAndSetupTexture();
			
			gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, projectionW, projectionH, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
			
			fboColourMapUI = gl.createFramebuffer();
			
			gl.bindFramebuffer(gl.FRAMEBUFFER, fboColourMapUI);
			
			gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texColourMapUI, 0);
			
			gl.bindFramebuffer(gl.FRAMEBUFFER, null);	
			
			//		
		};
		
		function initFrameBuffers() {
			
			// TODO: Take care of freeing buffers and creating new buffers of right size
			
			//
			
			vertex_perspview.push(
				projectionW,  projectionH,  0.0,  1.0,  1.0,
				0.0,  projectionH,  0.0,  0.0,  1.0,
				projectionW, 0.0,  0.0,  1.0,  0.0,
				0.0, 0.0,  0.0,  0.0,  0.0	);
			
			buffer_vertex_perspview = gl.createBuffer();
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_perspview);
			
			gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertex_perspview), gl.STATIC_DRAW);
			
			buffer_vertex_perspview.sizeVertex = 3;
			buffer_vertex_perspview.sizeTex = 2;
			buffer_vertex_perspview.numFaces = 4;
						
			gl.bindBuffer(gl.ARRAY_BUFFER, null);
						
			//
			
			texPerspView = createAndSetupTexture();
			
			gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, projectionW, projectionH, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);
			
			// Create the depth buffer
			depthBufferPerspView = gl.createRenderbuffer();
			
			gl.bindRenderbuffer(gl.RENDERBUFFER, depthBufferPerspView);
			gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, projectionW, projectionH);	
						
			fboPerspView = gl.createFramebuffer();
			gl.bindFramebuffer(gl.FRAMEBUFFER, fboPerspView);
			
			gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texPerspView, 0);
			gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthBufferPerspView);
			
			gl.bindFramebuffer(gl.FRAMEBUFFER, null);
			
			//		
			
		};
		
		//
		
		function mvPushMatrix() {
			var copy = mat4.clone(matModelView);
			
			mvMatrixStack.push(copy);
		};

		function mvPopMatrix() {
			if (mvMatrixStack.length == 0) {
				throw "Invalid popMatrix!";
			}
			
			matModelView = mvMatrixStack.pop();
		};	
		
		function initMatrices() {
			matModelView = mat4.create();
			mvMatrixStack = [];
			
			matProjection = mat4.create();
		};
		
		//
		
		function updateProjectionForPerspView(shaderPrg) {				
			gl.uniformMatrix4fv(shaderPrg.unif_projection_matrix, false, matProjection);
		};
		
		function updateModelViewForPerspView(shaderPrg) {				
			gl.uniformMatrix4fv(shaderPrg.unif_modelview_matrix, false, matModelView);
		};		
				
		//
		
		function renderPerspView(fboTarget, bColourMap) {
			var shPrgCurrent;
			
			//
			
			gl.bindFramebuffer(gl.FRAMEBUFFER, fboTarget);
			
			//
			
			gl.viewport(0, 0, projectionW, projectionH);
			
			//
			gl.clearColor(0.2, 0.2, 0.2, 1.0);  
			gl.clearDepth(1.0); 
			
			gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
            
            gl.enable(gl.CULL_FACE);
            gl.cullFace(gl.BACK);
            
			gl.enable(gl.DEPTH_TEST);  
			         
			//gl.depthFunc(gl.LESS); 
			//gl.depthFunc(gl.GREATER); 
			gl.depthFunc(gl.LEQUAL); 
			
			gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
			gl.enable(gl.BLEND);
			
			//gl.enable(gl.GL_MULTISAMPLE);
			//gl.enable(gl.GL_SAMPLE_ALPHA_TO_COVERAGE);

			//
			
			//mat4.perspective(matProjection, 45, oMainCanvas.width / oMainCanvas.height, 0.1, 100.0, matProjection);
			mat4.perspective(matProjection, 45, projectionW / projectionH, 0.1, 1024.0, matProjection);
			
			//mat4.ortho(matProjection, 0, 512, 512, 0, -100, 100);
			//mat4.ortho(matProjection, 0, projectionW, 0, projectionH, -100, 100);
			//mat4.ortho(matProjection, 0, projectionW, 0, projectionH, -300, 300);
			
			mat4.identity(matModelView);
						
			//
			
			if(false == bColourMap) {
				shPrgCurrent = shPrgPersp;	
			} else {
				shPrgCurrent = shPrgColourMap;		
			}	
			
			gl.useProgram(shPrgCurrent);
			
			//
			
			updateProjectionForPerspView(shPrgCurrent);			
			
			//
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_data_quad);
			gl.vertexAttribPointer(shPrgCurrent.attr_pos_quad, buffer_vertex_data_quad.sizeVertex, gl.FLOAT, false, 20, 0);
			
			if(false == bColourMap) {
				gl.vertexAttribPointer(shPrgCurrent.attr_tex0, buffer_vertex_data_quad.sizeTex, gl.FLOAT, false, 20, 12);			
				gl.enableVertexAttribArray(shPrgCurrent.attr_tex0);
				
				gl.activeTexture(gl.TEXTURE0);
				gl.bindTexture(gl.TEXTURE_2D, arrTextures[0]);
				gl.uniform1i(shPrgCurrent.unif_id_tex, 0);
				
				gl.uniform2f(shPrgCurrent.unif_id_resolution, projectionW, projectionH);
			} else {
				gl.uniform4f(shPrgCurrent.colorMap, 0.0, 1.0, 1.0, 1.0);
			}						
			
			mvPushMatrix();
			
			//mat4.translate(matModelView, matModelView, [256.0, 256.0, -10.0]);
			mat4.translate(matModelView, matModelView, [256.0, sample_trans.oY, -10.0]);
			mat4.rotateZ(matModelView, matModelView, sample_trans.rZ * (3.14159265/180));
			//mat4.rotateY(matModelView, matModelView, sample_trans.rZ * (3.14159265/180));
			
			updateModelViewForPerspView(shPrgCurrent);
			
			//
						
			gl.drawArrays(gl.TRIANGLE_STRIP, 0, buffer_vertex_data_quad.numFaces);
			
			mvPopMatrix();	
			
			if(false == bColourMap) {
				gl.disableVertexAttribArray(shPrgCurrent.attr_tex0);
			} else {
				
			}
			
			//
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_model_one);
			gl.vertexAttribPointer(shPrgCurrent.attr_pos_quad, buffer_vertex_model_one.sizeVertex, gl.FLOAT, false, 20, 0);
			
			if(false == bColourMap) {
				gl.vertexAttribPointer(shPrgCurrent.attr_tex0, buffer_vertex_model_one.sizeTex, gl.FLOAT, false, 20, 12);			
				gl.enableVertexAttribArray(shPrgCurrent.attr_tex0);
				
				gl.activeTexture(gl.TEXTURE0);
				gl.bindTexture(gl.TEXTURE_2D, arrTextures[0]);
				gl.uniform1i(shPrgCurrent.unif_id_tex, 0);
				
				gl.uniform2f(shPrgCurrent.unif_id_resolution, projectionW, projectionH);
			} else {
				gl.uniform4f(shPrgCurrent.colorMap, 1.0, 0.0, 1.0, 1.0);
			}						
			
			mvPushMatrix();
			
			//mat4.translate(matModelView, matModelView, [256.0, 256.0, -10.0]);
			mat4.rotateX(matModelView, matModelView, 180 * (3.14159265/180));
			mat4.rotateY(matModelView, matModelView, 180 * (3.14159265/180));
			//mat4.translate(matModelView, matModelView, [0.0, 200.0, -512.0]);
			mat4.translate(matModelView, matModelView, [0.0, 250.0, -768.0]);
			//mat4.translate(matModelView, matModelView, [0.0, -100.0, -512.0]);
			//mat4.rotateZ(matModelView, matModelView, sample_trans.rZ * (3.14159265/180));
			mat4.rotateY(matModelView, matModelView, 0.5*sample_trans.rZ * (3.14159265/180));
			//mat4.rotateX(matModelView, matModelView, 0.25*sample_trans.rZ * (3.14159265/180));
			
			updateModelViewForPerspView(shPrgCurrent);
			
			//
						
			gl.drawArrays(gl.TRIANGLES, 0, buffer_vertex_model_one.numFaces);
			
			mvPopMatrix();	
			
			if(false == bColourMap) {
				gl.disableVertexAttribArray(shPrgCurrent.attr_tex0);
			} else {
				
			}
						
			//			
			
			gl.activeTexture(gl.TEXTURE0);
			gl.bindTexture(gl.TEXTURE_2D, null);
							
			//
			
			gl.disable(gl.CULL_FACE);
			gl.disable(gl.BLEND);
			
			//			
		};	
		
		//
		
		function updateProjectionForLayout(shaderPrg) {				
			gl.uniformMatrix4fv(shaderPrg.unif_projection_matrix, false, matProjection);
		};
		
		function updateModelViewForLayout(shaderPrg) {				
			gl.uniformMatrix4fv(shaderPrg.unif_modelview_matrix, false, matModelView);
		};	
		
		//		
				
		function renderLayout(fboTarget, bColourMapControls, bColourMapFbos) {
			
			var shPrgControls;	
			var shPrgFbos;	
			
			//
			
			gl.bindFramebuffer(gl.FRAMEBUFFER, fboTarget);
			
			//
			
			gl.viewport(0, 0, projectionW, projectionH);
			
			//
			gl.clearColor(0.08, 0.16, 0.32, 1.0);  
			gl.clearDepth(1.0); 
			
			gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
			
			gl.enable(gl.DEPTH_TEST);           
			gl.depthFunc(gl.LEQUAL);  
			gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
			gl.enable(gl.BLEND);
			
			//
			
			mat4.ortho(matProjection, 0, projectionW, projectionH, 0, -100, 100);
			
			mat4.identity(matModelView);
						
			//
			
			if(false == bColourMapControls) {
				shPrgControls = shPrgLayout;	
			} else {
				shPrgControls = shPrgColourMap;		
			}
			
			gl.useProgram(shPrgControls);
			
			//
			
			updateProjectionForLayout(shPrgControls);		
			
			//
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_appIcon);
			gl.vertexAttribPointer(shPrgControls.attr_pos_quad, buffer_vertex_appIcon.sizeVertex, gl.FLOAT, false, 20, 0);
			
			if(false == bColourMapControls) {
				gl.vertexAttribPointer(shPrgControls.attr_tex0, buffer_vertex_appIcon.sizeTex, gl.FLOAT, false, 20, 12);
				gl.enableVertexAttribArray(shPrgControls.attr_tex0);
				
				gl.activeTexture(gl.TEXTURE0);
				gl.bindTexture(gl.TEXTURE_2D, arrTextures[1]);			
				gl.uniform1i(shPrgControls.unif_id_tex, 0);
				
				gl.uniform2f(shPrgControls.unif_id_resolution, projectionW, projectionH);
			} else {
				gl.uniform4f(shPrgControls.colorMap, 0.0, 0.0, 1.0, 1.0);
			}
			
			//
			
			mvPushMatrix();
			
			mat4.translate(matModelView, matModelView, [16.0, 16.0, -10.0]);
			
			updateModelViewForLayout(shPrgControls);				
			
			gl.drawArrays(gl.TRIANGLE_STRIP, 0, buffer_vertex_appIcon.numFaces);
			
			mvPopMatrix();
			
			if(false == bColourMapControls) {
				gl.disableVertexAttribArray(shPrgControls.attr_tex0);
			} else {
				
			}
						
			gl.activeTexture(gl.TEXTURE0);
			gl.bindTexture(gl.TEXTURE_2D, null);	
			
			//
			
			if(false == bColourMapFbos) {
				shPrgFbos = shPrgLayout;	
			} else {
				shPrgFbos = shPrgColourMap;		
			}	
			
			gl.useProgram(shPrgFbos);
			
			//
			
			updateProjectionForLayout(shPrgFbos);
				
			//
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_perspview);
			gl.vertexAttribPointer(shPrgFbos.attr_pos_quad, buffer_vertex_perspview.sizeVertex, gl.FLOAT, false, 20, 0);
			
			if(false == bColourMapFbos) {				
				gl.vertexAttribPointer(shPrgFbos.attr_tex0, buffer_vertex_perspview.sizeTex, gl.FLOAT, false, 20, 12);
				gl.enableVertexAttribArray(shPrgFbos.attr_tex0);
				
				gl.activeTexture(gl.TEXTURE0);
				gl.bindTexture(gl.TEXTURE_2D, texPerspView);
				//gl.bindTexture(gl.TEXTURE_2D, texColourMapUI);
				gl.uniform1i(shPrgFbos.unif_id_tex, 0);		// Texture associated with fboPerspView
				
				gl.uniform2f(shPrgFbos.unif_id_resolution, projectionW, projectionH);
			} else {
				gl.uniform4f(shPrgFbos.colorMap, 1.0, 0.0, 0.0, 1.0);
			}
			
			//
			
			mvPushMatrix();
			
			mat4.translate(matModelView, matModelView, [0.0, 32.0, -10.0]);
			
			updateModelViewForLayout(shPrgFbos);	
				
			gl.drawArrays(gl.TRIANGLE_STRIP, 0, buffer_vertex_perspview.numFaces);
			
			mvPopMatrix();
			
			if(false == bColourMapFbos) {
				gl.disableVertexAttribArray(shPrgFbos.attr_tex0);
			} else {
				
			}			
			
			gl.activeTexture(gl.TEXTURE0);
			gl.bindTexture(gl.TEXTURE_2D, null);	
			
			//
			
			gl.disable(gl.BLEND);
			
			//			
		};
		
		//		
				
		function renderScreenWithColourMap() {
			
			var shPrgControls;	
			
			//
			
			gl.bindFramebuffer(gl.FRAMEBUFFER, null);
			
			//
			
			gl.viewport(0, 0, projectionW, projectionH);
			
			//
			gl.clearColor(0.32, 0.16, 0.16, 1.0);  
			gl.clearDepth(1.0); 
			
			gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
			
			gl.enable(gl.DEPTH_TEST);           
			gl.depthFunc(gl.LEQUAL);  
			gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
			gl.enable(gl.BLEND);
			
			//
			
			mat4.ortho(matProjection, 0, projectionW, 0, projectionH, -100, 100);
			
			mat4.identity(matModelView);
									
			//
			
			shPrgFbos = shPrgLayout;		
			
			gl.useProgram(shPrgFbos);
			
			//
			
			updateProjectionForLayout(shPrgFbos);
				
			//
			
			gl.bindBuffer(gl.ARRAY_BUFFER, buffer_vertex_perspview);
			gl.vertexAttribPointer(shPrgFbos.attr_pos_quad, buffer_vertex_perspview.sizeVertex, gl.FLOAT, false, 20, 0);
							
			gl.vertexAttribPointer(shPrgFbos.attr_tex0, buffer_vertex_perspview.sizeTex, gl.FLOAT, false, 20, 12);
			gl.enableVertexAttribArray(shPrgFbos.attr_tex0);
			
			gl.activeTexture(gl.TEXTURE0);
			//gl.bindTexture(gl.TEXTURE_2D, texPerspView);
			gl.bindTexture(gl.TEXTURE_2D, texColourMapUI);
			gl.uniform1i(shPrgFbos.unif_id_tex, 0);		// Texture associated with fboPerspView
			
			gl.uniform2f(shPrgFbos.unif_id_resolution, projectionW, projectionH);
			
			//
			
			mvPushMatrix();
			
			mat4.translate(matModelView, matModelView, [0.0, 0.0, -10.0]);
			
			updateModelViewForLayout(shPrgFbos);	
				
			gl.drawArrays(gl.TRIANGLE_STRIP, 0, buffer_vertex_perspview.numFaces);
			
			mvPopMatrix();
			
			gl.disableVertexAttribArray(shPrgFbos.attr_tex0);			
			
			gl.activeTexture(gl.TEXTURE0);
			gl.bindTexture(gl.TEXTURE_2D, null);	
			
			//
			
			gl.disable(gl.BLEND);
			
			//			
		};
				
		function renderScene(fbo, bColour) {
			renderPerspView(fboPerspView, bColour);
			renderLayout(fbo, bColour, false);
		};
		
		function renderColourMapToFbo(fbo) {
			renderScene(fbo, true);
		};
				
		function renderSceneToScreen() {
			renderScene(null, false);
			//renderPerspView(null, false);
		};
		
		function resizeCanvas() {				
			if(true == bInitialised) {
				var width = window.innerWidth;
				var height = window.innerHeight;
				
				//oAppHeader.width = width;
				//oAppHeader.height = 50;
				
				oMyContainer.width = width;
				oMyContainer.height = height;
				//oMyContainer.height = height - oAppHeader.height;
				
				oMainCanvas.width = oMyContainer.width;
				oMainCanvas.height = oMyContainer.height;
				
				setProjectionSize(oMainCanvas.width, oMainCanvas.height);
				
				renderSceneToScreen();
			}
		};
		
		//
		
		// Animation functions
		function animateFrame() {
			// Apply rotation to cube mesh
			//cube.rotation.y += 0.01;	
			
			bPerformUpdate = true;			
		};
		
		function renderFrameUpdate() {
			if(true == bPerformUpdate) {
				requestAnimationFrame(animateScene);
				bPerformUpdate = false;
			}
		};
		
		function redrawScene() {
			renderSceneToScreen();
			
			//renderColourMapToFbo(null);
			// or
			//renderColourMapToFbo(fboColourMapUI);
			//renderScreenWithColourMap();
			
			//renderFrameUpdate();			
		};
				
		function animateScene(now) {
			// Convert the time to seconds
			//now *= 0.001;
			// Subtract the previous time from the current time
			//var deltaTime = now - then;
			// Remember the current time for the next frame.
			//then = now;
  			
			redrawScene();
			animateFrame();
		};
		
		//	
		
		function setProjectionSize(sW, sH) {
			projectionW = sW;
			projectionH = sH;
			
			initFrameBuffers();
			initColourMapUI();			
		};
		
		function firstRender() {
			sample_trans = {oX:0.0, oY: 200.0, rZ:0.0};
			
			gl.clearColor(0.08, 0.16, 0.32, 1.0);  
			gl.clearDepth(1.0);                 
			gl.enable(gl.DEPTH_TEST);           
			gl.depthFunc(gl.LEQUAL);         
			
			bInitialised = true;
			
			resizeCanvas();
			
			// Caution: First frame may not contain all textures, surfaces may be black or empty
			
			// Kick off animation loop
			bPerformUpdate = true;
			
			// Force render first frame
			redrawScene();
								
			animateScene();
		};
		
		function createAndSetupTexture() {
			var texture = gl.createTexture();
			
			gl.bindTexture(gl.TEXTURE_2D, texture);

			// Set up texture so we can render any size image and so we are working with pixels.
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
			gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

			return texture;
		};
			
		function loadTextures() {
			
			for (var ii = 0; ii < 2; ++ii) {
				var tmp_texture = createAndSetupTexture(); 
				
				gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
				
				// Upload the image into the texture.
				gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, imagesforTextures[ii]);
				
				gl.generateMipmap(gl.TEXTURE_2D);
				
				gl.bindTexture(gl.TEXTURE_2D, null);			

				// add the texture to the array of textures.
				arrTextures.push(tmp_texture);
			}
			
			firstRender();
			
			//runProgram();
		};
		
		function loadAsyncResources() {				
			loadImages([
					//"images/simple_texture_256.png",
					//"images/sample_256.png",
					"images/chair.jpg",
					//"images/vehicle_tex.png",
					//"images/simple_texture_512.png",
					"images/sample_32.png",
				], loadTextures
			);				
		};		
		
		function webGLMain() {
			oAppHeader = document.getElementById("appHeader");
			
			oMyContainer = document.getElementById("mycontainer");
			oMainCanvas = document.getElementById("mainCanvas");
			
			window.addEventListener('resize', resizeCanvas);
			
			initInputSystem();
			
			initGL(oMainCanvas);
			
			initShaders();	
			
			initBuffers();
			
			//initFrameBuffers();
			
			initMatrices();	
			
			loadAsyncResources(firstRender);
		};
		
		function logPosition() {
			//console.log(sample_trans.X);
			redrawScene();
		};
	
		function runProgram() {
			
			newPosX = sample_trans.oX + 400; //+ 400;
			newPosY = sample_trans.oY + 0; //+ 128;
			newRotZ = sample_trans.rZ + 5*180; //+ 5*180;
			
			Tweener.addTween(sample_trans, { rZ:newRotZ, time:6, delay:0.1, transition:"linear", onUpdate:logPosition});
		};
	</script>	
</html>
